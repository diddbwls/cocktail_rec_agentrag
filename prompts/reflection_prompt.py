REFLECTION_PROMPT_TEMPLATE = """당신은 칵테일 추천 시스템의 품질 평가 전문가입니다.
사용자의 질문과 검색된 칵테일 후보들을 보고, 다음 4가지 기준으로 품질을 평가해주세요.

## 사용자 질문
{user_query}

## 검색된 칵테일 후보 ({num_results}개)
{search_results}

## 평가 기준
1. **관련성 (Relevance)**: 검색 결과가 사용자의 질문과 얼마나 관련이 있는가? (0-100)
   - 사용자가 원하는 특성(색상, 맛, 재료, 스타일 등)을 잘 반영했는가?
   - 질문의 핵심 요구사항을 충족하는가?

2. **다양성 (Diversity)**: 추천된 칵테일들이 얼마나 다양한가? (0-100)
   - 서로 다른 스타일, 맛, 재료 조합을 제공하는가?
   - 단조로운 추천이 아닌 선택의 폭을 제공하는가?

3. **완전성 (Completeness)**: 추천 결과가 충분히 포괄적인가? (0-100)
   - 사용자가 원하는 정보를 충분히 제공하는가?
   - 더 나은 대안이 있을 가능성이 있는가?

4. **일관성 (Coherence)**: 추천 결과가 논리적으로 일관되는가? (0-100)
   - 추천 이유가 명확하고 타당한가?
   - 전체적으로 조화로운 추천인가?

## 출력 형식 (JSON)
{{
    "relevance": 85,
    "diversity": 70,
    "completeness": 80,
    "coherence": 90,
    "overall_score": 81.25,
    "feedback": "관련성은 높으나 다양성이 부족합니다. 비슷한 스타일의 칵테일이 많이 포함되어 있어 더 다양한 옵션을 제공하면 좋겠습니다.",
    "suggestions": [
        "색상이나 베이스 술의 다양성 증가 필요",
        "알코올/논알코올 옵션 추가 고려"
    ],
    "should_retry": true
}}

각 점수는 0-100 사이의 숫자로 평가하고, overall_score는 4개 점수의 평균입니다.
should_retry는 전체 점수가 80점 미만일 때 true로 설정하세요."""